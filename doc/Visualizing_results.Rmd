---
title: "Visualizing Results Notebook"
output: pdf_document
---
```{r setup, include=FALSE}
library(ggplot2)
library(patchwork)

```

# Foil Study -- Visualizing Results

## gPC studies


### gPC with non-log transformed Re

Loading results for gPC noLog Re: 

```{r load-gpc-nolog}
column_names <- c("Re", "alpha", "camber")
params_gpc_nolog <- read.csv("./data/parameters/gPC_Params_noLogRe.csv", 
                             header = FALSE)
colnames(params_gpc_nolog) <- column_names

gpc_nolog_results <- read.csv("./results/gPC_noLogRe_results.csv")
gpc_nolog_results <- gpc_nolog_results[order(gpc_nolog_results$sim),]
gpc_nolog_results$CLCD <- gpc_nolog_results$CL/gpc_nolog_results$CD
complete_gpc_nolog <- cbind(params_gpc_nolog, gpc_nolog_results)
```

Convergence rate: `r 100-round(sum(is.nan(complete_gpc_nolog$CL))/nrow(complete_gpc_nolog)*100,digits = 0)`%.

Plotting parameters for GPC (Re no log) showing where simulations did not converge:

```{r gpc-nolog-params, warning=FALSE, echo=FALSE}
p1_gpc_nolog <- ggplot(complete_gpc_nolog, aes(Re, camber, color = 
                                                 is.nan(CL))) + 
  geom_point(position = position_jitter()) +
  scale_color_manual(values = c("black", "red"), name = "Convergence",
                     labels = c("success", "failure")) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))
p2_gpc_nolog <- ggplot(complete_gpc_nolog, aes(Re, alpha, color = 
                                                 is.nan(CL))) + 
  geom_point(position = position_jitter()) +
  scale_color_manual(values = c("black", "red"), name = "Convergence",
                     labels = c("success", "failure")) +
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))

p1_gpc_nolog + p2_gpc_nolog + plot_layout(guides = "collect") &
  theme(legend.position = "bottom")
```
CL/CD results: 

```{r gpc_nolog_plots, warning=FALSE, echo=FALSE}
(ggplot(complete_gpc_nolog, aes(camber, CLCD)) + 
  geom_point() + theme_bw())/ 
(ggplot(complete_gpc_nolog, aes(Re, CLCD)) + 
  geom_point() + theme_bw()) /
(ggplot(complete_gpc_nolog, aes(alpha, CLCD)) + 
  geom_point() + theme_bw()) 
```

### gPC with log-transformed Re range

Loading results for log-transformed Re study: 

```{r load-gpc-log}
params_gpc_log <- read.csv("./data/parameters/gPC_Params_LogRe.csv",
                           header = FALSE)
colnames(params_gpc_log) <- column_names
gpc_log_results <- read.csv("./results/gPC_LogRe_results.csv")
gpc_log_results <- gpc_log_results[order(gpc_log_results$sim),]
gpc_log_results$CLCD <- gpc_log_results$CL/gpc_log_results$CD
complete_gpc_log <- cbind(params_gpc_log, gpc_log_results)
```

Convergence rate: `r 100-round(sum(is.nan(complete_gpc_log$CL))/nrow(complete_gpc_log)*100,digits = 0)`%.

Plotting parameters for GPC (Re log) showing where simulations did not converge:

```{r gpc-log-params, echo=FALSE, warning=FALSE}
p1_gpc_log <- ggplot(complete_gpc_log, aes(Re, camber, color = 
                                                 is.nan(CL))) + 
  geom_point(position = position_jitter()) +
  scale_color_manual(values = c("black", "red"), name = "Convergence",
                     labels = c("success", "failure")) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))
p2_gpc_log <- ggplot(complete_gpc_log, aes(Re, alpha, color = 
                                                 is.nan(CL))) + 
  geom_point(position = position_jitter()) +
  scale_color_manual(values = c("black", "red"), name = "Convergence",
                     labels = c("success", "failure")) +
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))

p1_gpc_log + p2_gpc_log + plot_layout(guides = "collect") &
  theme(legend.position = "bottom")
```

CL/CD results:

```{r gpc_log_plots, echo = FALSE, warning=FALSE}
(ggplot(complete_gpc_log, aes(camber, CLCD)) + 
  geom_point() + theme_bw())/ 
(ggplot(complete_gpc_log, aes(Re, CLCD)) + 
  geom_point() + theme_bw()) /
(ggplot(complete_gpc_log, aes(alpha, CLCD)) + 
  geom_point() + theme_bw()) 
```

## NN studies

### NN with non-log transformed Re


Loading data for NN study with non-log-transformed Re:
```{r load-nn-nolog}
params_nn_nolog <- read.csv("./data/parameters/NN_Params_noLogRe.csv", 
                          header = FALSE)
colnames(params_nn_nolog) <- column_names
nn_nolog_results <- read.csv("./results/NN_noLogRe_results.csv")
nn_nolog_results <- nn_nolog_results[order(nn_nolog_results$sim),]
complete_nn_nolog <- cbind(params_nn_nolog, nn_nolog_results)
complete_nn_nolog$CLCD <- complete_nn_nolog$CL/complete_nn_nolog$CD
```

Convergence rate: `r 100-round(sum(is.nan(complete_nn_nolog$CL))/nrow(complete_nn_nolog)*100,digits = 0)`%.

Plotting parameters for NN (Re no log) showing where simulations did not converge:

```{r nn-nolog-params, echo=FALSE}
p1_nn_nolog <- ggplot(complete_nn_nolog, aes(Re, camber, color = is.nan(CL))) + 
  geom_point() +
  scale_color_manual(values = c("black", "red"), name = "Convergence",
                     labels = c("success", "failure")) +
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))
p2_nn_nolog <- ggplot(complete_nn_nolog, aes(Re, alpha, color = is.nan(CL))) + 
  geom_point() +
  scale_color_manual(values = c("black", "red"), name = "Convergence",
                     labels = c("success", "failure")) +
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))

p1_nn_nolog + p2_nn_nolog + plot_layout(guides = "collect") &
  theme(legend.position = "bottom")
```

CL/CD results:

```{r nn-nolog-plots, echo=FALSE,warning=FALSE}
(ggplot(complete_nn_nolog, aes(camber, CLCD)) + 
  geom_point() + theme_bw())/ 
(ggplot(complete_nn_nolog, aes(Re, CLCD)) + 
  geom_point() + theme_bw()) /
(ggplot(complete_nn_nolog, aes(alpha, CLCD)) + 
  geom_point() + theme_bw()) 
```

### NN with log-transformed Re range

Loading data for NN study with log-transformed Re:

```{r load-nn-log}
params_nn_log <- read.csv("./data/parameters/NN_Params_LogRe.csv", 
                          header = FALSE)
colnames(params_nn_log) <- column_names
nn_log_results <- read.csv("./results/NN_LogRe_results.csv")
nn_log_results <- nn_log_results[order(nn_log_results$sim),]
complete_nn_log <- cbind(params_nn_log, nn_log_results)
complete_nn_log$CLCD <- complete_nn_log$CL/complete_nn_log$CD
```

Convergence rate: `r 100-round(sum(is.nan(complete_nn_log$CL))/nrow(complete_nn_log)*100,digits = 0)`%.

Plotting parameters for NN (Re no log) showing where simulations did not converge:

```{r nn-log-params, echo=FALSE, warning=FALSE}
p1_nn_log <- ggplot(complete_nn_log, aes(Re, camber, color = is.nan(CL))) + 
  geom_point() +
  scale_color_manual(values = c("black", "red"), name = "Convergence",
                     labels = c("success", "failure")) +
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))
p2_nn_log <- ggplot(complete_nn_log, aes(Re, alpha, color = is.nan(CL))) + 
  geom_point() +
  scale_color_manual(values = c("black", "red"), name = "Convergence",
                     labels = c("success", "failure")) +
  theme_minimal() + 
  theme(axis.text.x = element_text(angle = 45, vjust = 1, hjust=1))

p1_nn_log + p2_nn_log + plot_layout(guides = "collect") &
  theme(legend.position = "bottom")
```

CL/CD results:

```{r nn-log-plots, echo=FALSE,warning=FALSE}
(ggplot(complete_nn_log, aes(camber, CLCD)) + 
  geom_point() + theme_bw())/ 
(ggplot(complete_nn_log, aes(Re, CLCD)) + 
  geom_point() + theme_bw()) /
(ggplot(complete_nn_log, aes(alpha, CLCD)) + 
  geom_point() + theme_bw()) 
```
